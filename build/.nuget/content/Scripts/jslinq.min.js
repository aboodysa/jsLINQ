(function(b,g){var c,d,e,f,a;if(b.where===a)b.prototype.where=b.prototype.all=function(d){var c=this,b=0,g=c.length,f=[];if(d===a)return c;for(b;b<g;b++){var e=c[b];d(e)===true&&f.push(e)}return f};b.prototype.select=function(d){var c=this,b=0,g=c.length,e=[];if(d===a)return c;for(b;b<g;b++){var f=c[b];e.push(d(f))}return e};b.prototype.take=function(b){var d=this,e=d.length;if(b===a)return d;if(c(b)!=="[Number]")throw"count must be a number";return b>e?d:d.slice(0,b)};b.prototype.skip=function(b){var d=this,e=d.length;if(b===a)return d;if(c(b)!=="[Number]")throw"count must be a number";return b>e?d.slice(b-e):d.slice(b)};b.prototype.first=b.prototype.single=function(a){var b=this;return!a?b[0]:b.where(a)[0]};b.prototype.count=function(b){var c=this;return b===a?this.length:c.where(b).length};b.prototype.any=function(b){var c=this;return b===a?this.length>0:c.length<=0?false:c.where(b).length>0};b.prototype.toHash=b.prototype.toDictionary=function(d){var c=this,f=c.length,b=0,e={};if(d&&c[0][d]===a)throw"key is only valid for arrays of Object";for(b;b<f;b++)if(!d)e[b]=c[b];else e[c[b][d]]=c[b];return e};b.prototype.orderBy=b.prototype.order=function(g){var b=this,j=b.length,h,i;h=g===a?c(b[0]):c(b[0][g]);if(g!==a&&h!=="[Object]"&&b[0][g]===a)throw"cannot use prop with an Array of primitive types (String, Date, Number, Bool)";return g===a?h==="[String]"?b.sort(e):b.sort(d):h==="[String]"?b.sort(f(e,g)):b.sort(f(d,g))};f=function(a,b){return function(c,d){return a(c,d,b)}};c=function(a){return g.prototype.toString.call(a).replace("object ","")};d=function(c,d,b){return b===a?c-d:c[b]-d[b]};e=function(e,f,b){var c,d;c=b===a?e:e[b];d=b===a?f:f[b];return c.localeCompare(d)}})(Array,Object)