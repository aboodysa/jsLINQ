(function(a,g){var c,d,e,f,b;a.fn=a.prototype;if(a.each===b)a.fn.each=function(c){var b=this,d=b.length,a=0;for(a;a<d;a++)c(b[a],a)};if(a.where===b)a.fn.where=a.fn.all=function(a){var c=this,d=[];if(a===b)return c;c.each(function(b){a(b)===true&&d.push(b)});return d};if(a.select===b)a.fn.select=function(c){var a=this,d=[];if(c===b)return a;a.each(function(a){d.push(c(a))});return d};if(a.take===b)a.fn.take=function(a){var d=this,e=d.length;if(a===b)return d;if(c(a)!=="[Number]")throw"count must be a number";return a>e?d:d.slice(0,a)};if(a.skip===b)a.fn.skip=function(a){var d=this,e=d.length;if(a===b)return d;if(c(a)!=="[Number]")throw"count must be a number";return a>e?d.slice(a-e):d.slice(a)};if(a.first===b||a.single===b)a.fn.first=a.fn.single=function(a){var b=this;return!a?b[0]:b.where(a)[0]};if(a.count===b)a.fn.count=function(a){var c=this;return a===b?this.length:c.where(a).length};if(a.any===b)a.fn.any=function(a){var c=this;return a===b?this.length>0:c.length<=0?false:c.where(a).length>0};if(a.toHash===b||a.toDictionary===b)a.fn.toHash=a.fn.toDictionary=function(c){var a=this,d={};if(c&&a[0][c]===b)throw"key is only valid for arrays of Object";a.each(function(e,b){if(!c)d[b]=a[b];else d[a[b][c]]=a[b]});return d};if(a.orderBy===b||a.order===b)a.fn.orderBy=a.fn.order=function(g){var a=this,h,i;h=g===b?c(a[0]):c(a[0][g]);if(g!==b&&h!=="[Object]"&&a[0][g]===b)throw"cannot use prop with an Array of primitive types (String, Date, Number, Bool)";return g===b?h==="[String]"?a.sort(e):a.sort(d):h==="[String]"?a.sort(f(e,g)):a.sort(f(d,g))};if(a.sum===b)a.fn.sum=function(d){var a=this,e,f=0;e=d===b?c(a[0]):c(a[0][d]);if(e!=="[Number]")throw"array values must be a Number";a.each(function(g,c){var e=d===b?a[c]:a[c][d];f+=e});return f};if(a.average===b||a.mean===b)a.fn.average=a.fn.mean=function(d){var a=this,f=a.length,e;e=d===b?c(a[0]):c(a[0][d]);if(e!=="[Number]")throw"array values must be a Number";return a.sum(d)/f};f=function(a,b){return function(c,d){return a(c,d,b)}};c=function(a){return g.prototype.toString.call(a).replace("object ","")};d=function(c,d,a){return a===b?c-d:c[a]-d[a]};e=function(e,f,a){var c,d;c=a===b?e:e[a];d=a===b?f:f[a];return c.localeCompare(d)}})(Array,Object)